<div class="archives-tree-container">
  <div id="archives_tree_toolbar"></div>
  <div id="archives_tree" class="archives-tree" data-digital_object-id="<%= @digital_object_tree['digital_object_id'] %>"></div>

  <script>
     AS.tree_data["digital_object-id-<%= @digital_object_tree['digital_object_id'] %>"] = <%= @digital_object_tree.to_json.html_safe %>;
  </script>

  <div id="tree_template"><!--
     {macro render_children(nodes)}
        {if nodes.length > 0}
        <ul>
           {for node in nodes}
              <li id="digital_object_component_${node.id}" class="digital digital_object_component" rel="digital_object_component" data-id="${node.id}" data-digital_object_component="${node.digital_object_component}">
                 <a href="#tree::digital_object_component_${node.id}" title="${AS.encodeForAttribute(node.title)}">${node.title}</a>
                 ${render_children(node.children)}
              </li>
           {/for}
        </ul>
        {/if}
     {/macro}
   
     {macro render_digital_object(node)}
        <li id="digital_object_${node.digital_object_id}" class="digital_object" rel="digital_object" data-id="${node.digital_object_id}">
           <a href="#tree::digital_object_${node.digital_object_id}" title="${AS.encodeForAttribute(node.title)}">${node.title}</a>
           ${render_children(tree.children)}
        </li>
     {/macro}
   
     <ul class="jstree-classic">
        ${render_digital_object(tree)}
     </ul>
  --></div>

  <div id="tree_toolbar_template"><!--
    <div class="btn-toolbar">
      <div class="btn-group"></div>
    </div>
  --></div>

  <div id="tree_toolbar_addchild_template"><!--
     <div class="btn-group dropdown">
      <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#" title="Add Child">
        Add Child
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li>
           <a href="javascript:void(0);" class="add-child-digital-object-component">
              <span class='icon-file'></span> Digital Object Component
           </a>         
        </li>
      </ul>
    </div>
  --></div>

  <div id="tree_toolbar_addsibling_template"><!--
      <div class="btn-group dropdown">
       <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#" title="Add Sibling">
         +1
         <span class="caret"></span>
       </a>
       <ul class="dropdown-menu">
         <li>
            <a href="javascript:void(0);" class="add-sibling-digital-object-component">
               <span class='icon-file'></span> Digital Object Component
            </a>         
         </li>
       </ul>
     </div>
  --></div>

  <div id="tree_nodenavigation_toolbar_template"><!--
    <div class="btn-group">
      {if defined('previous')}
        <a href="#tree::${previous}" class="btn btn-mini"><span class="icon-arrow-left"></span></a>
      {else}
        <a disabled="disabled" class="btn btn-mini"><span class="icon-arrow-left"></span></a>
      {/if}
      {if defined('next')}
        <a href="#tree::${next}" class="btn btn-mini"><span class="icon-arrow-right"></span></a>
      {else}
        <a disabled="disabled" class="btn btn-mini"><span class="icon-arrow-right"></span></a>
      {/if}
    </div>
  --></div>
</div>